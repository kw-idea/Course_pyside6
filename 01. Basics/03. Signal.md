# 03. Signal

> ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í–ˆë‹¤ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œìš”?


Signal : ì‚¬ìš©ìì˜ ë²„íŠ¼ í´ë¦­, ì…ë ¥ ë“±ì— ì˜í•´ ìœ„ì ¯ì˜ ìƒíƒœê°€ ë°”ë€ŒëŠ” ê²ƒ

Slot : Signal ì„ ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì´ë¦„

```python
import sys
from PySide6.QtWidgets import QApplication, QMainWindow, QPushButton

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        button = QPushButton("Press Me!")
        button.setCheckable(True)
        button.clicked.connect(self.the_button_was_clicked)

        # Set the central widget of the Window.
        self.setCentralWidget(button)

    def the_button_was_clicked(self):
        print("Clicked!")

app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

button.clicked ë¼ëŠ” Signal ì„ `the_button_was_clicked` ë¼ëŠ” í•¨ìˆ˜(Slot)ì™€ ì—°ê²°(connect) í•¨.

setCheckable(True) : ë²„íŠ¼ì„ check (toggle) ì²˜ëŸ¼ í™œìš©í•  ìˆ˜ ìˆìŒ.

> ğŸ˜ Practice! <br>
self, checked 2ê°œë¥¼ ì¸ìë¡œ ê°–ëŠ” toggle í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³ , checked ê°’ì„ í™•ì¸í•´ë³´ì„¸ìš” <br>
ì—¬ëŸ¬ slot ì„ í•˜ë‚˜ì˜ signal ì— ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ìƒíƒœë¥¼ ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ê¸°

check ì˜ ìƒíƒœëŠ” í´ë˜ìŠ¤ ë‚´ ë©¤ë²„ ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë” ë°”ëŒì§í•©ë‹ˆë‹¤. 

í´ë˜ìŠ¤ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.button_is_checked = True # ë©¤ë²„ë³€ìˆ˜ ì¶”ê°€

        self.setWindowTitle("My App")

        button = QPushButton("Press Me!")
        button.setCheckable(True)
        button.clicked.connect(self.the_button_was_toggled)
        button.setChecked(self.button_is_checked)

        self.setCentralWidget(button)

    def the_button_was_toggled(self, checked):
        self.button_is_checked = checked

        print(self.button_is_checked)
```

### Signal ì— ë”°ë¼ ìœ„ì ¯ì˜ ì†ì„± ë³€ê²½í•˜ê¸°

ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ, ë²„íŠ¼ì˜ í¬ê¸°ê°€ ë³€ê²½ë˜ê±°ë‚˜ í…ìŠ¤íŠ¸ê°€ ë³€ê²½ë˜ëŠ” ë“± ì¡°ê¸ˆ ë” ë‹¤ì–‘í•œ ë³€í™”ê°€ ë°œìƒí•˜ë„ë¡ í•´ë´…ë‹ˆë‹¤.

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        self.button = QPushButton("Press Me!")
        self.button.clicked.connect(self.the_button_was_clicked)

        self.setCentralWidget(self.button)

    def the_button_was_clicked(self):
        self.button.setText("You already clicked me.")
        self.button.setEnabled(False)

        # Also change the window title.
        self.setWindowTitle("My Oneshot App")
```

ì£¼ìš” ê¸°ëŠ¥
- ë²„íŠ¼ì˜ ì´ë¦„ì„ ë³€ê²½ (setText)
- í•œ ë²ˆ í´ë¦­í•˜ë©´ ë” ì´ìƒ í´ë¦­í•  ìˆ˜ ì—†ê²Œ ë³€ê²½ (setEnabled)

ì •ë¦¬
- ëŒ€ë¶€ë¶„ì˜ ìœ„ì ¯ì€ ìì²´ Signal ì„ ê°–ê³  ìˆìŒ
- ì¸í„°ë™ì…˜ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ Signal ì„ í™œìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ í™œìš©í•¨


---

### Signal ì— ë”°ë¼ ì°½ ì œëª© ë³€ê²½í•˜ê¸° ì‘ìš©

QMainWindow í´ë˜ìŠ¤ ì•„ë˜ button.clicked ë˜ëŠ” windowTitleChanged ë“±ì˜ ì—¬ëŸ¬ Signal ì´ ì •ì˜ë˜ì–´ìˆìŒ.

ì´ë¥¼ í™œìš©í•˜ì—¬ ë²„íŠ¼ì„ í´ë¦­í•  ë•Œë§ˆë‹¤ ëœë¤í•œ ì°½ ì œëª©ì„ í‘œì‹œí•˜ë„ë¡ ë§Œë“¤ì–´ë³´ëŠ” ì˜ˆì œì´ë‹¤.

```python
import sys
from random import choice

from PySide6.QtWidgets import QApplication, QMainWindow, QPushButton

window_titles = [
    "My App",
    "My App",
    "Still My App",
    "Still My App",
    "What on earth",
    "What on earth",
    "This is surprising",
    "This is surprising",
    "Something went wrong",
]

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.n_times_clicked = 0

        self.setWindowTitle("My App")

        self.button = QPushButton("Press Me!")
        self.button.clicked.connect(self.the_button_was_clicked)

        self.windowTitleChanged.connect(self.the_window_title_changed)

        self.setCentralWidget(self.button)

    def the_button_was_clicked(self):
        print("Clicked.")
        new_window_title = choice(window_titles)
        print("Setting title:  %s" % new_window_title)
        self.setWindowTitle(new_window_title)

    def the_window_title_changed(self, window_title):
        print("Window title changed: %s" % window_title)

        if window_title == "Something went wrong":
            self.button.setDisabled(True)

app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()

```

### ì£¼ìš” ê¸°ëŠ¥
- random ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ choice í™œìš©í•˜ì—¬ ì„ì˜ ì„ íƒì„ êµ¬í˜„

- Window title ì´ something went wrong ì´ ë˜ëŠ” ìˆœê°„ ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë˜ì–´ ë” ì´ìƒ í´ë¦­í•  ìˆ˜ ì—†ê²Œ ë¨

- ì œëª©ì´ ë°”ë€Œì§€ ì•Šìœ¼ë©´ windowTitleChanged Signal ì€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ


---

### Signal ì„ ìœ„ì ¯ì˜ method ì™€ ì§ì ‘ ì—°ê²°í•˜ê¸°

```python
import sys

from PySide6.QtWidgets import (
    QApplication,
    QLabel,
    QLineEdit,
    QMainWindow,
    QVBoxLayout,
    QWidget,
)

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        self.label = QLabel()

        self.input = QLineEdit()
        self.input.textChanged.connect(self.label.setText) # ì§ì ‘ ì—°ê²°!

        layout = QVBoxLayout()
        layout.addWidget(self.input)
        layout.addWidget(self.label)

        container = QWidget()
        container.setLayout(layout)

        self.setCentralWidget(container)

app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

ì£¼ìš”ê¸°ëŠ¥
- Text input ì— ì…ë ¥í•œ ë‚´ìš©ì´ ê·¸ëŒ€ë¡œ label ì— í‘œê¸°
- ë³„ë„ì˜ í•¨ìˆ˜ë¡œ signal ê³¼ ì—°ê²°í•˜ì§€ ì•Šê³ , self.label ì´ ì œê³µí•˜ëŠ” method ë¡œ ì—°ê²°í•¨
- QVBoxLayout ì€ ë‹¤ìŒ ì¥ì—ì„œ ë‹¤ë£° ì˜ˆì •. Vertical ë¡œ ìš”ì†Œë¥¼ ìŒ“ëŠ” ë ˆì´ì•„ì›ƒ

---

### ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸

ì•„ë˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ QMainWindow ë‚´ì˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤.

| Event Handler | ì´ë²¤íŠ¸ ìœ í˜• |
|---------------|------------|
|mouseMoveEvent() | ë§ˆìš°ìŠ¤ ì´ë™ |
|mousePressEvent() | ë§ˆìš°ìŠ¤ ë²„íŠ¼ ëˆŒë¦¼|
|mouseReleaseEvent() | ë§ˆìš°ìŠ¤ ë²„íŠ¼ ëˆŒë¦¼ì˜ í•´ì œ|
|mouseDoubleClickEvent() | ë§ˆìš°ìŠ¤ ë”ë¸”í´ë¦­ |


ë‹¤ìŒ ì´ë²¤íŠ¸ method ë¥¼ í†µí•´ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì½ì„ ìˆ˜ ìˆë‹¤.

| Method | Return |
|---|---|
|.button()	|ì´ ì´ë²¤íŠ¸ë¥¼ íŠ¸ë¦¬ê±°í•œ ë²„íŠ¼ (ë²„íŠ¼ì‹ë³„ì ì°¸ê³ )
|.buttons()	|ëª¨ë“  ë§ˆìš°ìŠ¤ ë²„íŠ¼ì˜ ìƒíƒœ
|.globalPos()	|ì‘ìš© í”„ë¡œê·¸ë¨ ê¸°ì¤€-ì „ì—­ ìœ„ì¹˜ (QPoint)
|.globalX()	|ì‘ìš© í”„ë¡œê·¸ë¨ ê¸°ì¤€-ì „ì—­ ìœ„ì¹˜ì˜ X 
|.globalY()	|ì‘ìš© í”„ë¡œê·¸ë¨ ê¸°ì¤€-ì „ì—­ ìœ„ì¹˜ì˜ Y 
|.pos()	|ìœ„ì ¯ ê¸°ì¤€ ìƒëŒ€ ìœ„ì¹˜ (QPoint - ì •ìˆ˜í‘œí˜„)
|.posF()	|ìœ„ì ¯ ê¸°ì¤€ ìƒëŒ€ ìœ„ì¹˜ (QPointF - ì‹¤ìˆ˜í‘œí˜„)

ë‹¤ìŒ ë²„íŠ¼ ì‹ë³„ìë¥¼ í†µí•´ ì–´ë–¤ ë²„íŠ¼ì„ ëˆŒë €ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

|ì‹ë³„ì	|ê°’(binary)	|ëŒ€í‘œí•˜ë‹¤|
|---|---|---|
|Qt.MouseButton.NoButton	|0 (000)|	ë²„íŠ¼ì„ ëˆ„ë¥´ì§€ ì•Šì•˜ê±°ë‚˜, ì´ë²¤íŠ¸ê°€ ë²„íŠ¼ ëˆŒë¦¼ê³¼ ê´€ë ¨ì´ ì—†ìŒ|
|Qt.MouseButton.LeftButton	|1 (001)|	ì™¼ìª½ ë²„íŠ¼ì„ ëˆ„ë¦„|
|Qt.MouseButton.RightButton	|2 (010)	|ì˜¤ë¥¸ìª½ ë²„íŠ¼ì„ ëˆ„ë¦„|
|Qt.MouseButton.MiddleButton	|4 (100)	|ê°€ìš´ë° ë²„íŠ¼ì„ ëˆ„ë¦„|

### ë§ˆìš°ìŠ¤ í•¸ë“¤ëŸ¬ ì˜ˆì œ

```python
import sys

from PySide6.QtCore import Qt
from PySide6.QtWidgets import QApplication, QLabel, QMainWindow

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.label = QLabel("Click in this window")
        self.setCentralWidget(self.label)

    def mousePressEvent(self, e):
        if e.button() == Qt.MouseButton.LeftButton:
            self.label.setText("mousePressEvent LEFT")

        elif e.button() == Qt.MouseButton.MiddleButton:
            self.label.setText("mousePressEvent MIDDLE")

        elif e.button() == Qt.MouseButton.RightButton:
            self.label.setText("mousePressEvent RIGHT")

    def mouseReleaseEvent(self, e):
        if e.button() == Qt.MouseButton.LeftButton:
            self.label.setText("mouseReleaseEvent LEFT")

        elif e.button() == Qt.MouseButton.MiddleButton:
            self.label.setText("mouseReleaseEvent MIDDLE")

        elif e.button() == Qt.MouseButton.RightButton:
            self.label.setText("mouseReleaseEvent RIGHT")

    def mouseDoubleClickEvent(self, e):
        if e.button() == Qt.MouseButton.LeftButton:
            self.label.setText("mouseDoubleClickEvent LEFT")

        elif e.button() == Qt.MouseButton.MiddleButton:
            self.label.setText("mouseDoubleClickEvent MIDDLE")

        elif e.button() == Qt.MouseButton.RightButton:
            self.label.setText("mouseDoubleClickEvent RIGHT")

app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

### Context Menu

ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì°½ì„ ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ ë²„íŠ¼ìœ¼ë¡œ í´ë¦­í•˜ë©´ ë‚˜íƒ€ë‚˜ëŠ” ë©”ë‰´ì„.

ì´ëŸ¬í•œ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ëŠ” contextMenuEvent() ë¥¼ í†µí•´ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.

```python
import sys

from PySide6.QtGui import QAction
from PySide6.QtWidgets import QApplication, QMainWindow, QMenu

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

    def contextMenuEvent(self, e):
        context = QMenu(self)
        context.addAction(QAction("test 1", self))
        context.addAction(QAction("test 2", self))
        context.addAction(QAction("test 3", self))
        context.exec(e.globalPos())

app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```


